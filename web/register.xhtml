<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
     <script src="resources/js/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="resources/js/jquery.bpopup.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/humanity/jquery-ui.css"/>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css"/>
    <script>
        $(function() {
            $("#dialog").dialog({
                autoOpen: false,
                show: {
                    effect: "blind",
                    duration: 250
                },
                hide: {
                    effect: "explode",
                    duration: 250
                }


            });
            $("#opener").click(function() {
                $("#dialog").dialog("open");
            });
        });
    </script>
    <script type="text/javascript">
        //<![CDATA[ 



        $(document).ready(function() {
            var password1 = $('#cmd\\:password1'); //id of first password field
            var password2 = $('#cmd\\:password2'); //id of second password field
            var passwordsInfo = $('#cmd\\:pass-info'); //id of indicator element
            var counter = 0;
            var name, lastname, mail, tel, address, city, postcode, pass1, cbClick, pass2 = false;
            // passwordStrengthCheck(password1, password2, passwordsInfo);
            $("#cmd\\:lnametick").hide();
            $("#cmd\\:lnameerror").hide();
            $("#cmd\\:llastnametick").hide();
            $("#cmd\\:llastnamerror").hide();
            $("#cmd\\:lemailtick").hide();
            $("#cmd\\:lemailerror").hide();
            $("#cmd\\:lteltick").hide();
            $("#cmd\\:ltelerror").hide();
            $("#cmd\\:laddresstick").hide();
            $("#cmd\\:laddresserror").hide();
            $("#cmd\\:lcitytick").hide();
            $("#cmd\\:lcityerror").hide();
            $("#cmd\\:lpostcodetick").hide();
            $("#cmd\\:lpostcodeerror").hide();
            $("#cmd\\:lpostcode").attr("maxlength", "4");
            $("#cmd\\:tel").attr("maxlength", "10");
            $("#cmd\\:low").hide();
            $("#cmd\\:medium").hide();
            $("#cmd\\:strong").hide();
            $("#cmd\\:repasstick").hide();
            $("#cmd\\:repasserror").hide();
            $("#cmd\\:send").attr("disabled", true);
            $("#cmd\\:msg").css("visibility", "hidden");
            $("#cmd\\:popup").css("visibility", "hidden");
            



            $("#cmd\\:terms").click(function() {

                $("#cmd\\:termsDetails").bPopup({
                    easing: 'easeOutBack', //uses jQuery easing plugin
                    speed: 450,
                    transition: 'slideDown'
                });


            });
            $("#cmd\\:aggrement").change(function() {
                if ($("#cmd\\:aggrement").is(":checked")) {
                    cbClick = true;
                    activeButton();
                }
                else {
                    cbClick = false;
                    activeButton();
                }

            });
            passwordStrengthCheck(password1, password2, passwordsInfo);


            $("#cmd\\:name").keyup(function() {

                if ($.trim($("#cmd\\:name").val()).length < 3) {

                    $("#cmd\\:lnametick").hide();
                    $("#cmd\\:lnameerror").show();
                    name = false;
                    activeButton();
                }
                else {
                    $("#cmd\\:lnameerror").hide();
                    $("#cmd\\:lnametick").show();
                    name = true;
                    activeButton();
                }


            });
            $("#cmd\\:lastname").keyup(function() {

                if ($.trim($("#cmd\\:lastname").val()).length < 2) {

                    $("#cmd\\:llastnametick").hide();
                    $("#cmd\\:llastnamerror").show();
                    lastname = false;
                    activeButton();
                }
                else {
                    $("#cmd\\:llastnametick").show();
                    $("#cmd\\:llastnamerror").hide();
                    lastname = true;
                    activeButton();
                }
            });

            $("#cmd\\:email").keyup(function() {



                if (!(validateEmail($.trim($("#cmd\\:email").val())))) {

                    $("#cmd\\:lemailtick").hide();
                    $("#cmd\\:lemailerror").show();
                    mail = false;
                    activeButton();
                }
                else if ($.trim($("#cmd\\:value").val("bu email artiq qeydiyatdan kecib"))) {
                    $("#cmd\\:lemailtick").hide();
                    $("#cmd\\:lemailerror").hide();
                    mail=false;
                    activeButton();
                }
                if((validateEmail($.trim($("#cmd\\:email").val())))) {
                    //alert($("#cmd\\:value").val());
                    $("#cmd\\:lemailtick").show();
                    $("#cmd\\:lemailerror").hide();
                    mail = true;
                    activeButton();
                }
            });
            $("#cmd\\:tel").keyup(function() {

                if (!validateTel($.trim($("#cmd\\:tel").val()))) {

                    $("#cmd\\:lteltick").hide();
                    $("#cmd\\:ltelerror").show();
                    tel = false;
                    activeButton();
                }
                else {
                    $("#cmd\\:lteltick").show();
                    $("#cmd\\:ltelerror").hide();
                    tel = true;
                    activeButton();

                }
            });
            
            $("#popup").dialog({
                autoOpen: false,
                show: {
                    effect: "blind",
                    duration: 250
                },
                hide: {
                    effect: "explode",
                    duration: 250
                }
                

            });
            
            $("#cmd\\:adress").keyup(function() {

                if ($.trim($("#cmd\\:adress").val()).length <= 4) {

                    $("#cmd\\:laddresstick").hide();
                    $("#cmd\\:laddresserror").show();
                    address = false;
                    activeButton();

                }
                else {
                    $("#cmd\\:laddresstick").show();
                    $("#cmd\\:laddresserror").hide();
                    address = true;
                    activeButton();

                }
            });

            $("#cmd\\:city").keyup(function() {

                if ($.trim($("#cmd\\:city").val()).length < 4) {

                    $("#cmd\\:lcitytick").hide();
                    $("#cmd\\:lcityerror").show();
                    city = false;
                    activeButton();
                }
                else {
                    $("#cmd\\:lcitytick").show();
                    $("#cmd\\:lcityerror").hide();
                    city = true;
                    activeButton();
                }
            });

            $("#cmd\\:lpostcode").keyup(function() {

                if (!validatePostCode($("#cmd\\:lpostcode").val()) || $("#cmd\\:lpostcode").val().length !== 4) {

                    $("#cmd\\:lpostcodetick").hide();
                    $("#cmd\\:lpostcodeerror").show();
                    postcode = false;
                    activeButton();
                }

                else if (validatePostCode($("#cmd\\:lpostcode").val()) && $("#cmd\\:lpostcode").val().length === 4) {

                    $("#cmd\\:lpostcodetick").show();
                    $("#cmd\\:lpostcodeerror").hide();
                    postcode = true;
                    activeButton();
                }

            });
            
            $("#cmd\\:password2").keyup(function() {

                if ($("#cmd\\:password1").val() !== $("#cmd\\:password2").val())
                {
                    $("#cmd\\:repasserror").show();
                    $("#cmd\\:repasstick").hide();
                    pass2 = false;
                    activeButton();
                }
                if ($("#cmd\\:password1").val() === $("#cmd\\:password2").val()) {
                    $("#cmd\\:repasserror").hide();
                    $("#cmd\\:repasstick").show();
                    pass2 = true;
                    activeButton();
                }
                if ($("#cmd\\:password2").val().length < 1) {
                    $("#cmd\\:repasserror").hide();
                    $("#cmd\\:repasstick").hide();
                    pass2 = false;
                    activeButton();

                }

            });

            function passwordStrengthCheck(password1, password2, passwordsInfo)
            {

                $(password1).keyup(function(e) {
                    var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
                    var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
                    var enoughRegex = new RegExp("(?=.{6,}).*", "g");
                    if (false === enoughRegex.test($(this).val())) {
                        $("#cmd\\:low").hide();
                        $("#cmd\\:medium").hide();
                        $("#cmd\\:strong").hide();
                        pass1 = false;
                        activeButton();

                    } else if (strongRegex.test($(this).val())) {
                        $("#cmd\\:low").hide();
                        $("#cmd\\:medium").hide();
                        $("#cmd\\:strong").show();
                        pass1 = true;
                        activeButton();
                    } else if (mediumRegex.test($(this).val())) {
                        $("#cmd\\:low").hide();
                        $("#cmd\\:medium").show();
                        $("#cmd\\:strong").hide();
                        pass1 = true;
                        activeButton();
                    } else {
                        $("#cmd\\:low").show();
                        $("#cmd\\:medium").hide();
                        $("#cmd\\:strong").hide();
                        pass1 = true;
                        activeButton();
                    }
                    return true;
                });

            }

            function activeButton() {
                //alert(name+" "+lastname+" "+mail+" "+tel+" "+address+" "+city+" "+postcode+" "+pass1+" "+pass2+" "+cbClick);
                if (name === true && lastname === true && mail === true && city === true && address === true
                        && postcode === true && tel === true && pass1 === true && pass2 === true && cbClick === true) {

                    $("#cmd\\:send").attr("disabled", false);
                } else {

                    $("#cmd\\:send").attr("disabled", true);

                }
            }
            
      

            function validateEmail(sEmail) {
                var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
                if (filter.test(sEmail)) {
                    return true;
                }
                else {
                    return false;
                }
            }


            function validateTel(sTel) {

                if (!isNaN(sTel)) {
                    return true;
                }
                else {
                    return false;
                }
            }

            function validatePostCode(sPostCode) {

                if (!isNaN(sPostCode)) {

                    return true;
                }
                else {
                    return false;
                }
            }

        });
        //]]>
    </script>

    <body >

        <ui:composition template="./template.xhtml">

            <ui:define name="content">
                <h:form id="cmd" class="form-horizontal">


                    <div class="container">

                        <div class="row">

                            <div class="span9">
                                <div class="register">

                                    <div class="titleHeader clearfix">
                                        <h3>Create New Account</h3>
                                    </div><!--end titleHeader-->



                                    <h4>&nbsp;&nbsp;&nbsp;&nbsp;1. Personal Informations</h4>

                                    <div class="control-group ">
                                        <label class="control-label" for="inputFirstName">Adı: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputText  id="name" value="#{user.f_name}"/>
                                            <span class="help-inline"><h:graphicImage value="resources/images/tick.png" id="lnametick"/><h:graphicImage value="resources/images/error.png" id="lnameerror"/></span>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group ">
                                        <label class="control-label" for="inputLastName">Soyadı;:<span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputText id="lastname" value="#{user.l_name}"/>
                                            <span class="help-inline"><h:graphicImage value="resources/images/tick.png" id="llastnametick"/><h:graphicImage value="resources/images/error.png" id="llastnamerror"/></span>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <label class="control-label" for="inputEMAdd">E-Mail Address: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputText value="#{user.email}" id="email">
                                                <f:ajax execute="email" render="value" event="keyup" listener="#{user.checkEmail()}" />
                                            </h:inputText>

                                            <span class="help-inline"><h:graphicImage value="resources/images/tick.png" id="lemailtick"/><h:graphicImage value="resources/images/error.png"  id="lemailerror"/><h:outputLabel id="value" value="#{user.value}" /> </span>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <label class="control-label" for="inputTele">Telefon: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputText id="tel" value="#{user.tel}"/>
                                            <span class="help-inline"><h:graphicImage value="resources/images/tick.png" id="lteltick"/><h:graphicImage value="resources/images/error.png" id="ltelerror"/></span>
                                        </div>
                                    </div><!--end control-group-->

                                    <h4>&nbsp;&nbsp;&nbsp;&nbsp;2. Delivery Informations</h4>

                                    <div class="control-group">
                                        <label class="control-label" for="inputCompany">Sirkət</label>
                                        <div class="controls">
                                            <h:inputText id="inputCompany" value="#{user.company}"/>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <label class="control-label" for="inputFirstAdd">Adres: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputText id="adress" value="#{user.first_address}"/>
                                            <span class="help-inline"><h:graphicImage value="resources/images/tick.png" id="laddresstick"/><h:graphicImage value="resources/images/error.png" id="laddresserror"/></span>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <label class="control-label" for="inputSecondAdd">Novbəti Adres:</label>
                                        <div class="controls">
                                            <h:inputText id="inputSecondAdd" value="#{user.second_address}"/>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <label class="control-label" for="inputCity">Şəhər <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputText id="city" value="#{user.city}"/>
                                            <span class="help-inline"><h:graphicImage value="resources/images/tick.png" id="lcitytick"/><h:graphicImage value="resources/images/error.png" id="lcityerror"/></span>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <label class="control-label" for="inputPostCode">Post Code: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            AZ
                                            <h:inputText id="lpostcode" value="#{user.post_code}" style="width: 187px"/>
                                            <span class="help-inline"><h:graphicImage value="resources/images/tick.png" id="lpostcodetick"/><h:graphicImage value="resources/images/error.png" id="lpostcodeerror"/></span>
                                        </div>
                                    </div><!--end control-group-->

                                    <h4>&nbsp;&nbsp;&nbsp;&nbsp;3. Set Your Password</h4>

                                    <div class="control-group">
                                        <label class="control-label" for="inputPass">Password: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputSecret id="password1" value="#{user.password}"/>
                                            <span class="help-inline"><h:graphicImage width="75" id="low" value="resources/images/low.png"/><h:graphicImage width="75" value="resources/images/medium.png" id="medium"/><h:graphicImage width="75" value="resources/images/high.png" id="strong"/>
                                                <h:outputLabel id="msg" /></span>

                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <label class="control-label" for="inputConPass">Re-Type Password: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <h:inputSecret id="password2"/>
                                            <span class="help-inline"><h:graphicImage id="repasstick" value="resources/images/tick.png"/><h:graphicImage value="resources/images/error.png" id="repasserror"/></span>
                                        </div>
                                    </div><!--end control-group-->

                                    <hr/>

                                    <div class="control-group">
                                        <label class="control-label" for="inputConPass">Newslatter: <span class="text-error">*</span></label>
                                        <div class="controls">
                                            <label class="radio inline">
                                                <input type="radio" value="1" name="sub"/> Subscribe
                                            </label>
                                            <label class="radio inline">
                                                <input type="radio" value="2" name="sub"/> Unsubscribe
                                            </label>
                                        </div>
                                    </div><!--end control-group-->

                                    <div class="control-group">
                                        <div class="controls">
                                            <label class="checkbox">
                                                <h:selectBooleanCheckbox  id="aggrement">I'v read and agreed on</h:selectBooleanCheckbox> 


                                            </label>
                                            <div id="dialog" title="Qaydalar">
                                                <p>This is an animated dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
                                            </div>
                                            <a href=""  id="opener">Qaydalar</a>
                                            <br/>

                                            <h:commandButton id="send" class="btn btn-primary" action="#{user.insertUserr()}" value="Register"/>
                                                
                                           

                                         
                                        </div>
                                    </div><!--end control-group-->

                                    <!--end form-->

                                </div><!--end register-->
                            </div><!--end span9-->



                            <div class="span3">
                                <div class="titleHeader clearfix">
                                    <h3>Bölmələr</h3>
                                </div><!--end titleHeader-->
                                <ul class="unstyled my-account">
                                    <li><a class="invarseColor" href="login.xhtml"><i class="icon-caret-right"></i> Daxil Ol</a></li>
                                    <li><a class="invarseColor" href="forgot.xhtml"><i class="icon-caret-right"></i> Şifrəmi unutdum</a></li>
                                    <li><a class="invarseColor" href="myaccount.xhtml"><i class="icon-caret-right"></i> Hesabım</a></li>
                                    <li><a class="invarseColor" href="wishlist.xhtml"><i class="icon-caret-right"></i> Sevimli siyahı</a></li>
                                    <li><a class="invarseColor" href="orderhistory.xhtml"><i class="icon-caret-right"></i> Sifariş arxivi</a></li>
                                </ul>
                            </div><!--end span3-->

                        </div><!--end row-->

                    </div><!--end conatiner-->
                </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
